// SPDX-License-Identifier: MIT
pragma solidity ^0.8.24;

import "./LaunchPool.sol";
import "@openzeppelin/contracts/access/Ownable.sol";

/**
 * @title LaunchPoolFactory
 * @notice Deploys new LaunchPool instances for any token pair
 */
contract LaunchPoolFactory is Ownable {
    address[] public pools;
    address public vault;

    event PoolCreated(address indexed creator, address pool);

    constructor(address _vault) {
        require(_vault != address(0), "zero vault");
        vault = _vault;
    }

    function createPool(
        address stakeToken,
        address rewardToken,
        uint256 rewardRatePerSecond // optional, can be 0
    ) external onlyOwner returns (address) {
        LaunchPool pool = new LaunchPool(stakeToken, rewardToken, vault, rewardRatePerSecond);
        pool.transferOwnership(msg.sender);
        pools.push(address(pool));
        emit PoolCreated(msg.sender, address(pool));
        return address(pool);
    }

    function allPoolsLength() external view returns (uint256) {
        return pools.length;
    }
}
