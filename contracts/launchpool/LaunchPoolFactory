// SPDX-License-Identifier: MIT
pragma solidity ^0.8.24;

import "./LaunchPool.sol";
import "../token/AtlasToken.sol";
import "@openzeppelin/contracts/access/Ownable.sol";

/**
 * @title LaunchPoolFactory
 * @notice Deploys LaunchPools for staking/reward programs
 */
contract LaunchPoolFactory is Ownable {
    AtlasToken public atlasToken;
    address[] public allPools;

    event LaunchPoolCreated(address indexed pool);

    constructor(AtlasToken _atlasToken, address _admin) {
        require(address(_atlasToken) != address(0), "zero address");
        atlasToken = _atlasToken;
        _transferOwnership(_admin);
    }

    /**
     * @notice Create a new LaunchPool
     * @param rewardRate Reward rate per second (optional, can be zero)
     * @param startTime Pool start time
     * @param endTime Pool end time
     * @return pool Address of deployed LaunchPool
     */
    function createLaunchPool(
        uint256 rewardRate,
        uint256 startTime,
        uint256 endTime
    ) external onlyOwner returns (address pool) {
        LaunchPool newPool = new LaunchPool(
            atlasToken,
            rewardRate,
            startTime,
            endTime,
            owner()
        );
        allPools.push(address(newPool));
        emit LaunchPoolCreated(address(newPool));
        return address(newPool);
    }

    function getAllPools() external view returns (address[] memory) {
        return allPools;
    }
}
